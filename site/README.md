# GitHub Pages Prototype

This directory hosts the boilerplate for a lightweight GitHub Pages site that showcases the WJEC document scraper
outputs with modern browser tooling.

## Stack

- **Tailwind CSS v4** (Local Build) for styling and layout.
- **Papa Parse** for fast CSV ingestion.
- **Arquero** for in-browser querying, filtering, and aggregation.
- **ApexCharts** for interactive charting.

## Development

1. Install dependencies:
   ```bash
   cd site
   npm install
   ```

2. Start the Tailwind CSS watcher:
   ```bash
   npm run watch
   ```

3. In a separate terminal, serve the site:
   ```bash
   uv run python -m http.server 8080 -d site
   ```

4. Open `http://localhost:8080` in a browser.

Note: `papaparse` does not ship an ES module entry in the npm package, so the site loads it as a classic script tag and exposes it as `window.Papa`. Arquero and ApexCharts are used as native ES modules via an `importmap` that resolves these bare specifiers to `node_modules` paths.

## Building for Production

To generate the final CSS file:

```bash
cd site
npm run build
```

Once merged, point GitHub Pages at the `site/` directory (or rename it to `docs/`) to publish the prototype.

## What I changed (so far)

- Installed Node.js/npm locally in the environment so the Tailwind CLI can run.
- Initialized a `package.json` in the `site/` directory and installed `tailwindcss` v4 and the `@tailwindcss/cli` package.
 - Bootstrapped the `site/` project using `npm` and installed dependencies with the npm CLI (no uv wrapper): `tailwindcss`, `@tailwindcss/cli` (dev), and `papaparse`, `arquero`, and `apexcharts` (runtime).
- Added `site/src/input.css` with a small WJEC-branded theme (custom properties for colors and fonts).
- Added `npm` scripts (`build` and `watch`) to generate `site/styles.css` from `site/src/input.css` using the Tailwind CLI.
- Updated `site/index.html` to use the locally built `site/styles.css` instead of the CDN version.
 - Updated `site/index.html` to use the locally built `site/styles.css` and an `importmap` to resolve `papaparse`, `arquero`, and `apexcharts` from local `node_modules`.
 - Switched `site/scripts/main.js` to import the modules by name, which will resolve via the import map to the local packages rather than CDN URLs.
 - Switched `site/scripts/main.js` to import Arquero and ApexCharts by name (ES modules) and to access Papa Parse via the global `window.Papa` since papaparse doesn't provide an ESM entry.

## Notes & Recommendations

- The `site/styles.css` file is generated by running `npm run build`. If you prefer to commit this compiled file to the repository (for example, to support GitHub Pages without a build step), remove `site/styles.css` from `.gitignore`.
- If you don't want to commit `package-lock.json`, you can add `site/package-lock.json` to `.gitignore`, but keeping it can help create reproducible, locked installs.
- If you're working on the design/theme. Run `npm run watch` during development; it will recompile `site/styles.css` whenever `site/src/input.css` changes.

## Troubleshooting

- If the Tailwind CLI cannot be found and `npm run build`/`npm run watch` fails, make sure Node and npm are available in the environment or run the install commands shown above.
- On fresh shells, you may have to re-run `npm install` inside `site/` to recreate `node_modules`.

If you want me to commit `site/styles.css` (compiled output) or the `package-lock.json` as part of the repo for the GitHub Pages deployment, say so and I will update `.gitignore` and add them.
